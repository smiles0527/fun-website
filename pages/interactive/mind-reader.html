<!DOCTYPE html>
<html>
<head>
    <title>Mind Reader</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../assets/css/style.css">
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }
        .game-container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            max-width: 500px;
            width: 90%;
            text-align: center;
        }
        input {
            width: 80%;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>Mind Reader</h1>
        <p>Pick any number you want, I will read your mind</p>
        <input type="text" id="numberInput" placeholder="Type a number...">
        <button onclick="readMind()">Read my mind</button>
        
        <div id="progressContainer">
            <div id="progressText">Reading your mind...</div>
            <div id="progressBar">
                <div id="progress"></div>
            </div>
        </div>
        
        <a href="../../index.html" style="display: block; margin-top: 20px; color: #6c5ce7; text-decoration: none;">‚Üê Back to Trollverse</a>
    </div>
    
    <audio id="explosionSound" preload="auto">
        <source src="../../assets/explosion.mp3" type="audio/mpeg">
    </audio>

    <script src="../../assets/js/troll-network.js"></script>
    <script>
        function readMind() {
            const number = document.getElementById('numberInput').value;
            if (!number) {
                alert('Please enter a number first!');
                return;
            }

            if (window.TrollNetwork) {
                window.TrollNetwork.log(`is thinking of the number ${number}`);
            }
            
            const progressContainer = document.getElementById('progressContainer');
            const progressText = document.getElementById('progressText');
            const progress = document.getElementById('progress');
            
            const messages = [
                "Reading your brain...",
                "Analyzing brain pattern...",
                "Connecting to your brain via bluetooth...",
                "Calculating 6.37E8913284919827489 possible combinations..."
            ];
            
            let currentMessage = 0;
            progressText.textContent = messages[0];
            progressContainer.style.display = 'block';
            
            let width = 0;
            let speed = 1;
            
            const interval = setInterval(() => {
                if (width >= 25 && currentMessage === 0) {
                    currentMessage = 1;
                    progressText.textContent = messages[1];
                } else if (width >= 50 && currentMessage === 1) {
                    currentMessage = 2;
                    progressText.textContent = messages[2];
                } else if (width >= 75 && currentMessage === 2) {
                    currentMessage = 3;
                    progressText.textContent = messages[3];
                }
                
                if (width < 20) {
                    speed = 0.3 + (width / 20) * 0.9; 
                } else if (width > 80) {
                    speed = 1.2 - ((width - 80) / 20) * 0.9; 
                } else {
                    speed = 1.2;
                }
                
                width += speed;
                progress.style.width = width + '%';
                
                if (width >= 100) {
                    clearInterval(interval);
    
                    const explosionSound = document.getElementById('explosionSound');
                    explosionSound.currentTime = 0;
                    explosionSound.play();
    
                    const explosion = document.createElement('div');
                    explosion.className = 'explosion';
                    explosion.textContent = 'üí•';
                    document.body.appendChild(explosion);
                    
                    const flash = document.createElement('div');
                    flash.className = 'screen-flash';
                    document.body.appendChild(flash);
                    
                    document.body.classList.add('shake');
                    
                    setTimeout(() => {
                        document.body.removeChild(explosion);
                        document.body.removeChild(flash);
                        document.body.classList.remove('shake');
                        progressText.textContent = `YOU WERE THINKING OF THE NUMBER ${number} ü§Øüò≤`;
                        setTimeout(() => {
                            progressContainer.style.display = 'none';
                            progress.style.width = '0%';
                        }, 3000);
                    }, 1000);
                }
            }, 80);
        }
    </script>
</body>
</html>

